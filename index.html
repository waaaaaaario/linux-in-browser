<!doctype html>
<title>Self-Hosted Linux</title>
<style>
    body { padding: 0; margin: 0; background: #000; color: #fff; }
    #screen_container {
        position: absolute;
        top: 0; bottom: 0; left: 0; right: 0;
        display: flex; justify-content: center; align-items: center;
        overflow: hidden;
    }
</style>

<div id="screen_container">
    <div style="white-space: pre; font-family: monospace;">Booting Linux...</div>
</div>

<script src="libv86.js"></script>

<script>
"use strict";

// 2. Wait until everything is fully loaded before running
window.onload = function() {
    console.log("Attempting to start emulator...");
    
    // Check if V86Starter actually exists now
    if (typeof V86Starter === "undefined") {
        console.error("V86Starter is still not defined!");
        return;
    }

    var emulator = new V86Starter({
        wasm_path: "v86.wasm",
        memory_size: 128 * 1024 * 1024,
        vga_memory_size: 2 * 1024 * 1024,
        screen_container: document.getElementById("screen_container"),
        bios: { url: "bios/seabios.bin" },
        vga_bios: { url: "bios/vgabios.bin" },
        cdrom: { url: "https://github.com/waaaaaaario/linux-in-browser/releases/tag/OS"},
        autostart: true,
    });
};
</script>

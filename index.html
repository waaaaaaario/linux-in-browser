<!doctype html>
<title>Self-Hosted Linux</title>
<style>
    body { padding: 0; margin: 0; background: #000; color: #fff; }
    #screen_container {
        position: absolute;
        top: 0; bottom: 0; left: 0; right: 0;
        display: flex; justify-content: center; align-items: center;
        overflow: hidden;
    }
</style>

<div id="screen_container">
    <div style="white-space: pre; font-family: monospace;">Loading emulator...</div>
</div>

<script src="libv86.js"></script>

<script>
"use strict";

<div class="controls">
        <label for="iso_file">Select ISO:</label>
        <input type="file" id="iso_file" accept=".iso" />
    </div>

   <script>
        document.getElementById("iso_file").addEventListener("change", function(event) {
            const file = event.target.files[0];
            if (!file) return;

            console.log("Loading file: " + file.name);
            
            var emulator = new V86({
                wasm_path: "v86.wasm",
                memory_size: 256 * 1024 * 1024,
                vga_memory_size: 2 * 1024 * 1024,
                <input type="file" id="iso_file" />
                screen_container: document.getElementById("screen_container"),
                bios: { url: "bios/seabios.bin" },
                vga_bios: { url: "bios/vgabios.bin" },
                cdrom: { file: file },
                autostart: true,
            });
        })
        .catch(err => {
            console.error(err);
            document.getElementById("screen_container").innerText = "Error: " + err.message;
        });
};
</script>
